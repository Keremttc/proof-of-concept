{% render 'partials/head.liquid' %}
{% render 'partials/nav.liquid' %}

<section class="filter-navigation">
  <form method="POST" action="/search" role="search" aria-label="Publicatie filteren">
    <div class="searchBox hidden">
      <input class="searchInput" type="search" name="zoekterm" placeholder="Zoek hier..." aria-label="Zoek in catalogus">
      <button type="submit" class="searchButton" aria-label="Zoeken">
        <img src="/assets/search.svg" alt="Zoek icoon">
      </button>
    </div>

    <div class="filters">
      <label for="place" class="visually-hidden">Filter op plaats</label>
      <select id="place" name="place" class="place">
        <option value="">Plaats van publicatie</option>
      </select>

      <label for="digital" class="visually-hidden">Gedigitaliseerde publicaties</label>
      <select id="digital" name="digital" class="digital">
        <option value="">Gedigitaliseerde publicaties</option>
      </select>

      <label for="year" class="visually-hidden">Filter op jaar</label>
      <select id="year" name="year">
        <option value="">Jaar</option>
      </select>
    </div>

    <label for="author" class="visually-hidden">Filter op auteur</label>
    <select id="author" name="author" class="auteur">
      <option value="">Auteur</option>
    </select>
  </form>
</section>

{% comment %} {% if zoekterm %}
  <h2>Zoekresultaten voor: "{{ zoekterm }}"</h2>
{% endif %} {% endcomment %}

<section class="book-list">
  {% for data in algemeen %}
    <article class="book-info">
      <a href="/detail/{{ data.id }}" class="book-cover-link">
        <img src="{{ data.asset.small }}" alt="Boekcover van {{ data.title }}" loading="lazy">
      </a>
      <div class="book-details">
        <h2>{{ data.title }}</h2>
        <p>Uitgever: {{ data.metadata.2.value.0 }}</p>
        <p>Jaar: {{ data.metadata.4.value }}</p>
        <p>Plaats: {{ data.metadata.3.value }}</p>
        <a href="/detail/{{ data.id }}" class="book-button">Bekijk boek</a>
      </div>
    </article>
  {% endfor %}
</section>

<script>
  const searchInput = document.querySelector('.searchInput');
  const bookItems = document.querySelectorAll('.book-info');

  searchInput?.addEventListener('input', () => {
    const filter = searchInput.value.toLowerCase();
    bookItems.forEach(book => {
      const title = book.querySelector('h2').textContent.toLowerCase();
      if (title.includes(filter)) {
        book.style.display = '';
      } else {
        book.style.display = 'none';
      }
    });
  });
</script>

{% render 'partials/footer.liquid' %}
